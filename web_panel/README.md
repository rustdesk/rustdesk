# ğŸ–¥ï¸ RustDesk Web Management Panel

Ğ’ĞµĞ±-Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°Ğ¼Ğ¸ RustDesk.

## ğŸš€ Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸

### Ğ§ĞµÑ€ĞµĞ· API Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ:

| Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ | Endpoint | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|--------|----------|----------|
| **Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²** | `/api/admin/devices` | ID, hostname, OS, username, version, online status |
| **Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ¾Ğ½Ğ»Ğ°Ğ¹Ğ½** | `/api/heartbeat` | Ğ£ÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ° Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑÑÑ‚ heartbeat ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 15 ÑĞµĞº |
| **Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ ÑĞ¸ÑÑ‚ĞµĞ¼Ğµ** | `/api/sysinfo` | CPU, RAM, OS Ğ²ĞµÑ€ÑĞ¸Ñ, hostname |
| **ĞÑƒĞ´Ğ¸Ñ‚ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğ¹** | `/api/audit/*` | ĞšÑ‚Ğ¾, ĞºĞ¾Ğ³Ğ´Ğ°, Ğº ĞºĞ¾Ğ¼Ñƒ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ°Ğ»ÑÑ |
| **ĞĞ´Ñ€ĞµÑĞ½Ğ°Ñ ĞºĞ½Ğ¸Ğ³Ğ°** | `/api/ab/get` | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ñ‘Ğ½Ğ½Ñ‹Ñ… ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ¾Ğ² Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ |

### Ğ’ĞµĞ±-Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚:

- ğŸ“± **Ğ’ÑĞµ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°** Ñ ID, hostname, OS, ÑÑ‚Ğ°Ñ‚ÑƒÑĞ¾Ğ¼
- ğŸŸ¢ **ĞĞ½Ğ»Ğ°Ğ¹Ğ½/Ğ¾Ñ„Ñ„Ğ»Ğ°Ğ¹Ğ½** ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸
- ğŸ”— **ĞšĞ½Ğ¾Ğ¿ĞºĞ° Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ** - Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ RustDesk Ñ‡ĞµÑ€ĞµĞ· URI
- ğŸ“Š **Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°** - Ğ²ÑĞµĞ³Ğ¾ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ², Ğ¾Ğ½Ğ»Ğ°Ğ¹Ğ½, Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğ¹
- ğŸ“‹ **ĞÑƒĞ´Ğ¸Ñ‚ Ğ»Ğ¾Ğ³Ğ¸** - Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğ¹
- ğŸ‘¥ **ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸** - ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑƒÑ‡Ñ‘Ñ‚Ğ½Ñ‹Ğ¼Ğ¸ Ğ·Ğ°Ğ¿Ğ¸ÑÑĞ¼Ğ¸

## ğŸ“¦ Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°

```bash
# Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
pip install flask pyjwt

# Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ
cd web_panel
python server.py
```

## ğŸ” Ğ’Ñ…Ğ¾Ğ´

- **URL:** http://localhost:21114
- **Ğ›Ğ¾Ğ³Ğ¸Ğ½:** admin
- **ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ:** admin123

## ğŸ”— ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ñƒ

### Ğ¡Ğ¿Ğ¾ÑĞ¾Ğ± 1: URI ÑÑ…ĞµĞ¼Ğ° (Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸)
ĞŸÑ€Ğ¸ ĞºĞ»Ğ¸ĞºĞµ "ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒÑÑ" Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ:
```
rustdesk://connection/new/123456789
```

### Ğ¡Ğ¿Ğ¾ÑĞ¾Ğ± 2: Ğ§ĞµÑ€ĞµĞ· ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ½ÑƒÑ ÑÑ‚Ñ€Ğ¾ĞºÑƒ
```bash
rustdesk.exe --connect 123456789
```

### Ğ¡Ğ¿Ğ¾ÑĞ¾Ğ± 3: API Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ
```python
import requests

# ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ URI Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ
response = requests.post('http://localhost:21114/api/admin/connect', 
    json={'device_id': '123456789'},
    headers={'Authorization': 'Bearer YOUR_TOKEN'})

uri = response.json()['uri']
# rustdesk://connection/new/123456789

# ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ² Windows
import os
os.startfile(uri)
```

## ğŸ“¡ API Ğ´Ğ»Ñ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸

### ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°
```bash
curl -H "Authorization: Bearer TOKEN" \
     http://localhost:21114/api/admin/devices
```

**Response:**
```json
{
  "devices": [
    {
      "id": "123456789",
      "hostname": "DESKTOP-ABC",
      "os": "Windows 10",
      "username": "admin",
      "version": "1.2.3",
      "online": 1,
      "last_seen": "2024-01-15 10:30:00"
    }
  ]
}
```

### Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ
```bash
curl -X POST -H "Authorization: Bearer TOKEN" \
     -H "Content-Type: application/json" \
     -d '{"device_id": "123456789"}' \
     http://localhost:21114/api/admin/connect
```

**Response:**
```json
{
  "uri": "rustdesk://connection/new/123456789",
  "device_id": "123456789"
}
```

## ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RustDesk       â”‚     â”‚   API Server    â”‚     â”‚   Web Browser   â”‚
â”‚  Client         â”‚â”€â”€â”€â”€â–¶â”‚   (Flask)       â”‚â—€â”€â”€â”€â”€â”‚   (Panel)       â”‚
â”‚                 â”‚     â”‚                 â”‚     â”‚                 â”‚
â”‚ â€¢ heartbeat     â”‚     â”‚ â€¢ /api/*        â”‚     â”‚ â€¢ Dashboard     â”‚
â”‚ â€¢ sysinfo       â”‚     â”‚ â€¢ SQLite DB     â”‚     â”‚ â€¢ Devices       â”‚
â”‚ â€¢ audit         â”‚     â”‚ â€¢ JWT Auth      â”‚     â”‚ â€¢ Users         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚   rustdesk://...      â”‚                       â”‚
         â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
                          â”‚   hbbs/hbbr  â”‚
                          â”‚  (ID/Relay)  â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (SQLite)

### Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹:

**devices** - ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°
```sql
id, uuid, hostname, os, username, version, 
cpu, memory, user_id, online, last_seen, created_at
```

**users** - Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸
```sql
id, username, password, email, is_admin, status, created_at
```

**audit_logs** - Ğ»Ğ¾Ğ³Ğ¸ Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ°
```sql
id, type, device_id, peer_id, action, data, created_at
```

**connections** - Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğ¹
```sql
id, device_id, peer_id, conn_type, started_at, ended_at, duration
```

## âš™ï¸ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° RustDesk ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°

Ğ’ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°Ñ… ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ° ÑƒĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ **API Server**:
```
http://YOUR_SERVER_IP:21114
```

Ğ˜Ğ»Ğ¸ Ğ¿Ñ€ĞµĞ´ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ Ğ² ĞºĞ¾Ğ´Ğµ (libs/hbb_common/src/config.rs).

## ğŸ”§ ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ

```bash
SECRET_KEY=your-secret-key
API_HOST=0.0.0.0
API_PORT=21114
```

## ğŸ“ TODO

- [ ] WebSocket Ğ´Ğ»Ñ real-time Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹
- [ ] Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ¾Ğ²Ğ¾Ğµ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°Ğ¼Ğ¸
- [ ] Ğ—Ğ°Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸
- [ ] ĞÑ‚Ñ‡Ñ‘Ñ‚Ñ‹ Ğ¸ ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚
- [ ] Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ LDAP/AD






